package hex.genmodel.algos.tree;

import java.io.PrintStream;
import java.util.ArrayList;

/**
 * Graph for representing a forest.
 */
public class Graph {
  private ArrayList<Subgraph> subgraphArray = new ArrayList<>();
  private int nextSubgraphNumber = 0;

  public Graph() {
    subgraphArray = new ArrayList<>();
  }

  Subgraph makeSubgraph(String name) {
    Subgraph sg = new Subgraph(nextSubgraphNumber, name);
    nextSubgraphNumber++;
    subgraphArray.add(sg);
    return sg;
  }

  public void print() {
    System.out.println("------------------------------------------------------------");
    System.out.println("Graph");
    for (Subgraph sg : subgraphArray) {
      sg.print();
    }
  }

  public void printDot(PrintStream os) {
    os.println("/*");
    os.println("Generated by:");
    os.println("    http://https://github.com/h2oai/h2o-3/tree/master/h2o-genmodel/src/main/java/hex/genmodel/tools/PrintMojo.java");
    os.println("*/");
    os.println("");
    os.println("/*");
    os.println("On a mac:");
    os.println("");
    os.println("$ brew install graphviz");
    os.println("$ dot -Tpng file.gv -o file.png");
    os.println("$ open file.png");
    os.println("*/");
    os.println("");
    os.println("digraph G {");
    for (Subgraph sg : subgraphArray) {
      sg.printDot(os);
    }
    os.println("");
    os.println("}");
    os.println("");
  }
}
